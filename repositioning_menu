using System;
using System.Collections;
using System.Collections.Generic;
using System.Linq;
using System.Collections.Specialized;
using UnityEngine.UI;
using UnityEngine;
using UnityEngine.EventSystems;
using System.Threading;
using System.Globalization;

public class repositioning_menu : MonoBehaviour, IDragHandler, IBeginDragHandler, IEndDragHandler
{

    public int drag_int;

    public void OnDrag(PointerEventData eventData)
    {
        if(drag_int == 0)
        {
            if (eventData.dragging)
            {
                next_mouse_position = Input.mousePosition;
                if (next_mouse_position != previous_mouse_position)
                {
                    gameObject.transform.localPosition = new Vector3
                    (gameObject.transform.localPosition.x + 2 * (next_mouse_position.x - previous_mouse_position.x),
                     gameObject.transform.localPosition.y + 2 * (next_mouse_position.y - previous_mouse_position.y),
                     gameObject.transform.localPosition.z);
                }
            }
            drag_int = 1;
        }
        else if(drag_int == 1)
        {
            previous_mouse_position = Input.mousePosition;
            drag_int = 0;
        }
       
    }

    public Vector3 previous_mouse_position;
    public Vector3 next_mouse_position;

    public void OnBeginDrag(PointerEventData eventData)
    {
        previous_mouse_position = Input.mousePosition;
    }

    public void OnEndDrag(PointerEventData eventData)
    {
       
    }

   Vector3 original_position;

    // Use this for initialization
    void Start () {
        original_position = gameObject.transform.localPosition;
	  }

	// Update is called once per frame
	void Update () {
        // Snaps the menu back On screen if the player attempts to move it off screen
		    if(gameObject.transform.localPosition.x > (Screen.currentResolution.width / 2) + (gameObject.GetComponent<RectTransform>().sizeDelta.x / 2) - 70 
           | gameObject.transform.localPosition.x < -1 * ((Screen.currentResolution.width / 2) + (gameObject.GetComponent<RectTransform>().sizeDelta.x / 2)) + 70
           | gameObject.transform.localPosition.y > (Screen.currentResolution.height / 2) + (gameObject.GetComponent<RectTransform>().sizeDelta.y / 2) - 70
           | gameObject.transform.localPosition.y < -1 * ((Screen.currentResolution.height / 2) + (gameObject.GetComponent<RectTransform>().sizeDelta.y / 2)) + 70)
        {
            gameObject.transform.localPosition = original_position;
        }
	}
}
